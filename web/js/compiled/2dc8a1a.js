(function(t,e){'use strict';if(typeof module!=='undefined'&&module.exports){module.exports=e(require('jquery'))}
else if(typeof define==='function'&&define.amd){define(['jquery'],function(t){return e(t)})}
else{e(t.jQuery)}}(this,function(t){'use strict';var e=function(i,s){this.$element=t(i);this.options=t.extend({},e.defaults,s);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.select=this.options.select||this.select;this.autoSelect=typeof this.options.autoSelect=='boolean'?this.options.autoSelect:!0;this.highlighter=this.options.highlighter||this.highlighter;this.render=this.options.render||this.render;this.updater=this.options.updater||this.updater;this.displayText=this.options.displayText||this.displayText;this.itemLink=this.options.itemLink||this.itemLink;this.followLinkOnSelect=this.options.followLinkOnSelect||this.followLinkOnSelect;this.source=this.options.source;this.delay=this.options.delay;this.$menu=t(this.options.menu);this.$appendTo=this.options.appendTo?t(this.options.appendTo):null;this.fitToElement=typeof this.options.fitToElement=='boolean'?this.options.fitToElement:!1;this.shown=!1;this.listen();this.showHintOnFocus=typeof this.options.showHintOnFocus=='boolean'||this.options.showHintOnFocus==='all'?this.options.showHintOnFocus:!1;this.afterSelect=this.options.afterSelect;this.afterEmptySelect=this.options.afterEmptySelect;this.addItem=!1;this.value=this.$element.val()||this.$element.text();this.keyPressed=!1;this.focused=this.$element.is(':focus')};e.prototype={constructor:e,setDefault:function(t){this.$element.data('active',t);if(this.autoSelect||t){var e=this.updater(t);if(!e){e=''};this.$element.val(this.displayText(e)||e).text(this.displayText(e)||e).change();this.afterSelect(e)};return this.hide()},select:function(){var e=this.$menu.find('.active').data('value');this.$element.data('active',e);if(this.autoSelect||e){var t=this.updater(e);if(!t){t=''};this.$element.val(this.displayText(t)||t).text(this.displayText(t)||t).change();this.afterSelect(t);if(this.followLinkOnSelect&&this.itemLink(e)){document.location=this.itemLink(e);this.afterSelect(t)}
else if(this.followLinkOnSelect&&!this.itemLink(e)){this.afterEmptySelect(t)}
else{this.afterSelect(t)}}
else{this.afterEmptySelect(t)};return this.hide()},updater:function(t){return t},setSource:function(t){this.source=t},show:function(){var i=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});var a=typeof this.options.scrollHeight=='function'?this.options.scrollHeight.call():this.options.scrollHeight,e;if(this.shown){e=this.$menu}
else if(this.$appendTo){e=this.$menu.appendTo(this.$appendTo);this.hasSameParent=this.$appendTo.is(this.$element.parent())}
else{e=this.$menu.insertAfter(this.$element);this.hasSameParent=!0};if(!this.hasSameParent){e.css('position','fixed');var s=this.$element.offset();i.top=s.top;i.left=s.left};var n=t(e).parent().hasClass('dropup'),o=n?'auto':(i.top+i.height+a),h=t(e).hasClass('dropdown-menu-right'),r=h?'auto':i.left;e.css({top:o,left:r}).show();if(this.options.fitToElement===!0){e.css('width',this.$element.outerWidth()+'px')};this.shown=!0;return this},hide:function(){this.$menu.hide();this.shown=!1;return this},lookup:function(e){var s;if(typeof(e)!='undefined'&&e!==null){this.query=e}
else{this.query=this.$element.val()};if(this.query.length<this.options.minLength&&!this.options.showHintOnFocus){return this.shown?this.hide():this};var i=t.proxy(function(){if(t.isFunction(this.source)&&this.source.length===3){this.source(this.query,t.proxy(this.process,this),t.proxy(this.process,this))}
else if(t.isFunction(this.source)){this.source(this.query,t.proxy(this.process,this))}
else if(this.source){this.process(this.source)}},this);clearTimeout(this.lookupWorker);this.lookupWorker=setTimeout(i,this.delay)},process:function(e){var i=this;e=t.grep(e,function(t){return i.matcher(t)});e=this.sorter(e);if(!e.length&&!this.options.addItem){return this.shown?this.hide():this};if(e.length>0){this.$element.data('active',e[0])}
else{this.$element.data('active',null)};if(this.options.items!='all'){e=e.slice(0,this.options.items)};if(this.options.addItem){e.push(this.options.addItem)};return this.render(e).show()},matcher:function(t){var e=this.displayText(t);return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){var s=[],n=[],o=[],e;while((e=t.shift())){var i=this.displayText(e);if(!i.toLowerCase().indexOf(this.query.toLowerCase()))s.push(e);else if(~i.indexOf(this.query))n.push(e);else o.push(e)};return s.concat(n,o)},highlighter:function(t){var o=this.query;if(o===''){return t};var s=t.match(/(>)([^<]*)(<)/g),i=[],n=[],e;if(s&&s.length){for(e=0;e<s.length;++e){if(s[e].length>2){i.push(s[e])}}}
else{i=[];i.push(t)};o=o.replace((/[\(\)\/\.\*\+\?\[\]]/g),function(t){return'\\'+t});var r=new RegExp(o,'g'),h;for(e=0;e<i.length;++e){h=i[e].match(r);if(h&&h.length>0){n.push(i[e])}};for(e=0;e<n.length;++e){t=t.replace(n[e],n[e].replace(r,'<strong>$&</strong>'))};return t},render:function(e){var s=this,n=this,h=!1,o=[],i=s.options.separator;t.each(e,function(t,s){if(t>0&&s[i]!==e[t-1][i]){o.push({__type:'divider'})};if(s[i]&&(t===0||s[i]!==e[t-1][i])){o.push({__type:'category',name:s[i]})};o.push(s)});e=t(o).map(function(e,i){if((i.__type||!1)=='category'){return t(s.options.headerHtml).text(i.name)[0]};if((i.__type||!1)=='divider'){return t(s.options.headerDivider)[0]};var o=n.displayText(i);e=t(s.options.item).data('value',i);e.find('a').html(s.highlighter(o,i));if(this.followLinkOnSelect){e.find('a').attr('href',n.itemLink(i))};if(o==n.$element.val()){e.addClass('active');n.$element.data('active',i);h=!0};return e[0]});if(this.autoSelect&&!h){e.filter(':not(.dropdown-header)').first().addClass('active');this.$element.data('active',e.first().data('value'))};this.$menu.html(e);return this},displayText:function(t){return typeof t!=='undefined'&&typeof t.name!='undefined'?t.name:t},itemLink:function(t){return null},next:function(e){var n=this.$menu.find('.active').removeClass('active'),i=n.next();if(!i.length){i=t(this.$menu.find('li')[0])};i.addClass('active');var s=this.updater(i.data('value'));this.$element.val(this.displayText(s)||s)},prev:function(t){var s=this.$menu.find('.active').removeClass('active'),e=s.prev();if(!e.length){e=this.$menu.find('li').last()};e.addClass('active');var i=this.updater(e.data('value'));this.$element.val(this.displayText(i)||i)},listen:function(){this.$element.on('focus',t.proxy(this.focus,this)).on('blur',t.proxy(this.blur,this)).on('keypress',t.proxy(this.keypress,this)).on('propertychange input',t.proxy(this.input,this)).on('keyup',t.proxy(this.keyup,this));if(this.eventSupported('keydown')){this.$element.on('keydown',t.proxy(this.keydown,this))};if('ontouchstart' in document.documentElement){this.$menu.on('touchstart','li',t.proxy(this.touchstart,this)).on('touchend','li',t.proxy(this.click,this))}
else{this.$menu.on('click',t.proxy(this.click,this)).on('mouseenter','li',t.proxy(this.mouseenter,this)).on('mouseleave','li',t.proxy(this.mouseleave,this)).on('mousedown',t.proxy(this.mousedown,this))}},destroy:function(){this.$element.data('typeahead',null);this.$element.data('active',null);this.$element.off('focus').off('blur').off('keypress').off('propertychange input').off('keyup');if(this.eventSupported('keydown')){this.$element.off('keydown')};this.$menu.remove();this.destroyed=!0},eventSupported:function(t){var e=t in this.$element;if(!e){this.$element.setAttribute(t,'return;');e=typeof this.$element[t]==='function'};return e},move:function(t){if(!this.shown)return;switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:if(t.shiftKey)return;t.preventDefault();this.prev();break;case 40:if(t.shiftKey)return;t.preventDefault();this.next();break}},keydown:function(e){this.keyPressed=!0;this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]);if(!this.shown&&e.keyCode==40){this.lookup()}
else{this.move(e)}},keypress:function(t){if(this.suppressKeyPressRepeat)return;this.move(t)},input:function(t){var e=this.$element.val()||this.$element.text();if(this.value!==e){this.value=e;this.lookup()}},keyup:function(t){if(this.destroyed){return};switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:if(!this.shown||(this.showHintOnFocus&&!this.keyPressed))return;this.select();break;case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break}},focus:function(t){if(!this.focused){this.focused=!0;this.keyPressed=!1;if(this.options.showHintOnFocus&&this.skipShowHintOnFocus!==!0){if(this.options.showHintOnFocus==='all'){this.lookup('')}
else{this.lookup()}}};if(this.skipShowHintOnFocus){this.skipShowHintOnFocus=!1}},blur:function(t){if(!this.mousedover&&!this.mouseddown&&this.shown){this.select();this.hide();this.focused=!1;this.keyPressed=!1}
else if(this.mouseddown){this.skipShowHintOnFocus=!0;this.$element.focus();this.mouseddown=!1}},click:function(t){t.preventDefault();this.skipShowHintOnFocus=!0;this.select();this.$element.focus();this.hide()},mouseenter:function(e){this.mousedover=!0;this.$menu.find('.active').removeClass('active');t(e.currentTarget).addClass('active')},mouseleave:function(t){this.mousedover=!1;if(!this.focused&&this.shown)this.hide()},mousedown:function(t){this.mouseddown=!0;this.$menu.one('mouseup',function(t){this.mouseddown=!1}.bind(this))},touchstart:function(e){e.preventDefault();this.$menu.find('.active').removeClass('active');t(e.currentTarget).addClass('active')},touchend:function(t){t.preventDefault();this.select();this.$element.focus()}};var i=t.fn.typeahead;t.fn.typeahead=function(i){var s=arguments;if(typeof i=='string'&&i=='getActive'){return this.data('active')};return this.each(function(){var o=t(this),n=o.data('typeahead'),h=typeof i=='object'&&i;if(!n)o.data('typeahead',(n=new e(this,h)));if(typeof i=='string'&&n[i]){if(s.length>1){n[i].apply(n,Array.prototype.slice.call(s,1))}
else{n[i]()}}})};e.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:t.noop,afterEmptySelect:t.noop,addItem:!1,followLinkOnSelect:!1,delay:0,separator:'category',headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'};t.fn.typeahead.Constructor=e;t.fn.typeahead.noConflict=function(){t.fn.typeahead=i;return this};t(document).on('focus.typeahead.data-api','[data-provide="typeahead"]',function(e){var i=t(this);if(i.data('typeahead'))return;i.typeahead(i.data())})}));
;var map,pErreur=document.getElementById("pErreur"),nombreEspece=document.querySelector("#countEspece").textContent,countEspece=parseInt(nombreEspece);espece=document.querySelectorAll("#tableEspece td");longitude=document.querySelectorAll("#tableLong td");latitude=document.querySelectorAll("#tableLat td");commentaire=document.querySelectorAll("#tableComm td");date=document.querySelectorAll("#tableDate td");photo=document.querySelectorAll("#tablePhoto td");var currentInfoWindow=null;function initMap(){var e,o={lat:40.363,lng:-10.044};map=new google.maps.Map(document.getElementById("map"),{zoom:2,center:o});for(e=0;e<espece.length;e++){longitudeFloat=parseFloat(longitude[e].textContent);latitudeFloat=parseFloat(latitude[e].textContent);especeString=espece[e].textContent;commentaireString=commentaire[e].textContent;dateString=date[e].textContent;photoString=photo[e].textContent;var t=photoString.trim();ajouterMarqueur(latitudeFloat,longitudeFloat,especeString,commentaireString,dateString,t,e)}};function ajouterMarqueur(l,u,o,n,r,a){var t,c={lat:l,lng:u};t=new google.maps.Marker({position:c,map:map});t.setMap(map);var e=new google.maps.InfoWindow();google.maps.event.addListener(t,"click",function(){if(currentInfoWindow!=null){currentInfoWindow.close()};if(a.length>0){e.setContent(o+"<br>"+r+"<br>"+n+"<br><a href='../uploads/img/"+a+"'>image</a> ")}
else{e.setContent(o+"<br>"+r+"<br>"+n)};e.open(map,t);currentInfoWindow=e})};
;$(function(){$('#recherche_espece').typeahead({source:noms})});