{% extends "OmegaNAOBundle::layout.html.twig" %}

{% block title %}
	Ajouter une observation - {{ parent() }}
{% endblock %}

{% block naobundle_body %}
	<h1 class="text-center">Ajouter une observation</h1>
	<hr>
	{% if app.session.flashBag.has('success') %}
		<div class="alert alert-success">
			{% for message in app.session.flashbag.get('success') %}
		        <p>{{ message }}</p>
		    {% endfor %}
	    </div>
	{% endif %}
	

	<div class="well">
	  {{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}

	  {# Les erreurs générales du formulaire. #}
	  {{ form_errors(form) }}

	  {# Génération manuelle et éclatée : #}
	  <div class="form-group">
	    {# Génération du label. #}
	    {{ form_label(form.espece, "Espèce", {'label_attr': {'class': 'col-sm-2'}}) }}

	    {# Affichage des erreurs pour ce champ précis. #}
	    {{ form_errors(form.espece) }}

	    <div class="col-md-10">
	      {# Génération de l'input. #}
	      {{ form_widget(form.espece, {'attr': {'data-provide': 'typeahead'}}) }}
	    </div>
	  </div>

	  <div class="form-group">
	    {# Génération du label. #}
	    {{ form_label(form.date, "Date d'observation", {'label_attr': {'class': 'col-sm-2'}}) }}

	    {# Affichage des erreurs pour ce champ précis. #}
	    {{ form_errors(form.date) }}

	    <div class="col-md-10">
	      {# Génération de l'input. #}
	      {{ form_widget(form.date) }}
	    </div>
	  </div>

	  <div class="form-group">
	    {# Génération du label. #}
	    {{ form_label(form.commentaire, "Commentaire", {'label_attr': {'class': 'col-sm-2'}}) }}

	    {# Affichage des erreurs pour ce champ précis. #}
	    {{ form_errors(form.commentaire) }}

	    <div class="col-md-10">
	      {# Génération de l'input. #}
	      {{ form_widget(form.commentaire) }}
	    </div>
	  </div>

	  <div class="form-group">
	    {# Génération du label. #}
	    {{ form_label(form.longitude, "Longitude", {'label_attr': {'class': 'col-sm-2'}}) }}

	    {# Affichage des erreurs pour ce champ précis. #}
	    {{ form_errors(form.longitude) }}

	    <div class="col-md-10">
	      {# Génération de l'input. #}
	      {{ form_widget(form.longitude) }}
	    </div>
	  </div>

	  <div class="form-group">
	    {# Génération du label. #}
	    {{ form_label(form.latitude, "Latitude", {'label_attr': {'class': 'col-sm-2'}}) }}

	    {# Affichage des erreurs pour ce champ précis. #}
	    {{ form_errors(form.latitude) }}

	    <div class="col-md-10">
	      {# Génération de l'input. #}
	      {{ form_widget(form.latitude) }}
	    </div>
	  </div>

	  <div class="form-group">
	    {# Génération du label. #}
	    {{ form_label(form.photo, "Ajouter une photo", {'label_attr': {'class': 'col-sm-2'}}) }}

	    {# Affichage des erreurs pour ce champ précis. #}
	    {{ form_errors(form.photo) }}

	    <div class="col-md-10">
	      {# Génération de l'input. #}
	      {{ form_widget(form.photo) }}
	    </div>
	  </div>
	
	  <div class="form-group">
	  	<div class="col-md-10">	
	  		<input type="submit" class="btn btn-success" value="Ajouter une observation" />
	  	</div>
	  </div>



	  {# Génération automatique des champs pas encore écrits.
	     Dans cet exemple, ce serait le champ CSRF (géré automatiquement par Symfony !)
	     et tous les champs cachés (type « hidden »). #}
	  {{ form_rest(form) }}

	  {# Fermeture de la balise <form> du formulaire HTML #}
	  {{ form_end(form) }}
	</div>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script src="{{ asset('js/bootstrap3-typeahead.js')}}"></script>
	<script>
           var noms = {% if noms is defined %}
           	{{ noms|json_encode|raw }}
           	{% else %} null
           	{% endif %}
       </script>
	<script src="{{ asset('js/autocomplete.js') }}"></script>
{% endblock %}
